"use strict";(self.webpackChunkGPI_task=self.webpackChunkGPI_task||[]).push([[333],{3333:(E,d,i)=>{i.r(d),i.d(d,{DashboardModule:()=>N});var s=i(6895),a=i(433),h=i(5765),b=i(8553),g=i(1407),M=i(727),C=i(1135),P=i(3900),t=i(8256);let u=(()=>{class n{constructor(){this.modal=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=i(4351),O=i(4004),p=i(2340),k=i(529);let f=(()=>{class n{constructor(e){this.http=e}updatePrice(e,o){return this.http.post(`${p.N.api_url}Api/SetPrice/${e}/${o}`,{})}getCompany(){return this.http.get(`${p.N.api_url}Api/GetAllCompanies`).pipe((0,_.b)(e=>this.http.get(`${p.N.api_url}Api/GetAllPrices`).pipe((0,O.U)(o=>{const c=[];return e.data.forEach(m=>{const l={company:m.name,markets:o.data.filter(U=>m.name===U.company.name)};c.push(l)}),c}))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(k.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=i(6742),v=i(235);function T(n,r){1&n&&(t.TgZ(0,"p",9),t._uU(1,"success"),t.qZA())}let y=(()=>{class n{constructor(e,o,c){this.fb=e,this.modalService=o,this.httpService=c,this.message=!1}ngOnInit(){this.createForm(this.item)}createForm(e){this.formMarket=this.fb.group({marketOnePrice:new a.NI(e.markets[0].price,a.kI.required),marketTwoPrice:new a.NI(e.markets[1].price,a.kI.required),marketThreePrice:new a.NI(e.markets[2].price,a.kI.required)})}closeModal(){this.modalService.modal.emit(!1),this.formMarket.reset()}submit(e,o){this.formMarket.get(e)?.valid?this.updatePrice(e,o):this.formMarket.get(e)?.markAsDirty()}updatePrice(e,o){this.httpService.updatePrice(o.id,this.formMarket.get(e)?.value).subscribe(()=>this.createMessage())}createMessage(){this.message=!0,setTimeout(()=>{this.message=!1},2e3)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(u),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-modal"]],inputs:{item:"item"},decls:19,vars:9,consts:[[3,"formGroup"],[1,"menu-btn",3,"click"],[1,"burger-btn"],["class","success",4,"ngIf"],[1,"input-area"],["formControlName","marketOnePrice","inputType","number","inputId","marketOnePrice",1,"input",3,"label","control"],["buttonClass","edit",1,"button",3,"click"],["formControlName","marketTwoPrice","inputType","number","inputId","marketTwoPrice",1,"input",3,"label","control"],["formControlName","marketThreePrice","inputType","number","inputId","marketThreePrice",1,"input",3,"label","control"],[1,"success"]],template:function(e,o){1&e&&(t.TgZ(0,"main")(1,"form",0)(2,"div",1),t.NdJ("click",function(){return o.closeModal()}),t._UZ(3,"div",2),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.qZA(),t.YNc(6,T,2,0,"p",3),t.TgZ(7,"div",4),t._UZ(8,"app-input",5),t.TgZ(9,"app-button",6),t.NdJ("click",function(){return o.submit("marketOnePrice",o.item.markets[0])}),t._uU(10,"Edit"),t.qZA()(),t.TgZ(11,"div",4),t._UZ(12,"app-input",7),t.TgZ(13,"app-button",6),t.NdJ("click",function(){return o.submit("marketTwoPrice",o.item.markets[1])}),t._uU(14,"Edit"),t.qZA()(),t.TgZ(15,"div",4),t._UZ(16,"app-input",8),t.TgZ(17,"app-button",6),t.NdJ("click",function(){return o.submit("marketThreePrice",o.item.markets[2])}),t._uU(18,"Edit"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formMarket),t.xp6(4),t.hij("Edit ",o.item.company," Prices"),t.xp6(1),t.Q6J("ngIf",o.message),t.xp6(2),t.Q6J("label",o.item.markets[0].market.name)("control",o.formMarket.get("marketOnePrice")),t.xp6(4),t.Q6J("label",o.item.markets[1].market.name)("control",o.formMarket.get("marketTwoPrice")),t.xp6(4),t.Q6J("label",o.item.markets[2].market.name)("control",o.formMarket.get("marketThreePrice")))},dependencies:[s.O5,x.r,v.a,a._Y,a.JJ,a.JL,a.sg,a.u],styles:['main[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0 0 0 260px;margin:auto;z-index:10;background:rgba(102,102,102,.363);height:100vh}main[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:green;font-size:18px;margin-bottom:15px}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:absolute;left:0;right:0;margin:auto;background-color:#fff;border-radius:10px;padding:50px;width:60%;text-align:center}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;display:flex;align-items:center;justify-content:center;width:25px;height:25px;cursor:pointer}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]:before, main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]:after{content:"";position:absolute;width:25px;height:2px;background:rgb(125,125,125);border-radius:4px;transition:all .3s ease-in-out}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]:before{top:0;left:0;transform:rotate(45deg) translate(3px);transform-origin:0%}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   .burger-btn[_ngcontent-%COMP%]:after{bottom:0;left:0;transform:rotate(-45deg) translate(4px);transform-origin:0%}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-area[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:60%}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-area[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:35%}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     input{font-size:14px!important;padding:4px 5px 4px 10px!important;margin-bottom:10px!important}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     label{color:#555;display:block!important;font-size:14px!important;margin-bottom:5px!important;text-align:start!important}main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]     input, main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]     select{border:1.5px solid red}']}),n})();function Z(n,r){if(1&n&&t._UZ(0,"app-edit-modal",4),2&n){const e=t.oxw(2);t.Q6J("item",e.item)}}function w(n,r){if(1&n&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.market.name," ")}}function A(n,r){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij("",e.price," $")}}function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",5),t._uU(2),t.qZA(),t.YNc(3,A,2,1,"td",3),t.TgZ(4,"td")(5,"button",6),t.NdJ("click",function(){const m=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.updatePrice(m))}),t._uU(6,"Update"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.company),t.xp6(1),t.Q6J("ngForOf",e.markets)}}function S(n,r){if(1&n&&(t.TgZ(0,"main")(1,"section"),t.YNc(2,Z,1,1,"app-edit-modal",1),t.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Company Name"),t.qZA(),t.YNc(8,w,2,1,"th",3),t.qZA()(),t.TgZ(9,"tbody"),t.YNc(10,I,7,2,"tr",3),t.qZA()()()()),2&n){const e=r.ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.modalShow),t.xp6(6),t.Q6J("ngForOf",e[0].markets),t.xp6(2),t.Q6J("ngForOf",e)}}const D=[{path:"",component:(()=>{class n{constructor(e,o){this.modalService=e,this.httpService=o,this.subscription=new M.w0,this.modalShow=!1,this.refreshInfo$=new C.X(!0)}ngOnInit(){this.subscription.add(this.modalService.modal.subscribe(e=>this.modalShow=e)),this.getData()}getData(){this.itemArray$=this.refreshInfo$.pipe((0,P.w)(e=>this.httpService.getCompany())),setInterval(()=>{this.refreshInfo$.next(!0)},5e3)}updatePrice(e){this.modalShow=!0,this.item=e}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"item",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[3,"item"],[1,"name"],[1,"button",3,"click"]],template:function(e,o){1&e&&(t.YNc(0,S,11,3,"main",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.itemArray$))},dependencies:[s.sg,s.O5,y,s.Ov],styles:["main[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto}.add[_ngcontent-%COMP%]{background-color:green;margin-bottom:15px;padding:10px}section[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:15px}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:center}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border-bottom:2.5px solid rgb(231,231,231)}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:.5px solid rgb(243,244,246)}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:700}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;display:inline-block;border:none;border-radius:4px;color:#fff;font-weight:700;opacity:.7;cursor:pointer;background-color:orange}section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}"]}),n})()}];let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(D),g.Bz]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,J,h.h,b.g,a.UX]}),n})()}}]);